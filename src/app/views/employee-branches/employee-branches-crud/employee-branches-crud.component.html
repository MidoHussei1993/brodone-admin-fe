<div class="card card-flush shadow-sm">
  <div class="card-header">
    <h3 class="card-title">
      <span> {{ mode | translate }} - </span>
      <span class="mx-2"> {{ "employeeBranches" | translate }} </span>
    </h3>
  </div>
  <div class="card-body">
    <form [formGroup]="form" (ngSubmit)="submit()">
      <div class="row mt-3">
        <div class="col-md-6 col-sm-12">
          <label class="form-label">{{ "title" | translate }}</label>
          <input
            type="text"
            formControlName="title"
            class="form-control form-control-rounded"
            placeholder="{{ 'title' | translate }}"
          />
          <div
            *ngIf="
              !form.get('title').valid &&
              (form.get('title').dirty || form.get('title').touched)
            "
            class="text text-danger"
          >
            <p *ngIf="form.get('title').hasError('required')">
              {{ "required" | translate }}
            </p>
            <p *ngIf="form.get('title').hasError('pattern')">
              {{ "only_en" | translate }}
            </p>
          </div>
        </div>
        <div class="col-md-6 col-sm-12">
          <label class="form-label">{{ "title" | translate }} ع</label>
          <input
            type="text"
            formControlName="titleAr"
            class="form-control form-control-rounded"
            placeholder="{{ 'title' | translate }} ع"
          />
          <div
            *ngIf="
              !form.get('titleAr').valid &&
              (form.get('titleAr').dirty || form.get('titleAr').touched)
            "
            class="text text-danger"
          >
            <p *ngIf="form.get('titleAr').hasError('required')">
              {{ "required" | translate }}
            </p>
            <p *ngIf="form.get('titleAr').hasError('pattern')">
              {{ "only_ar" | translate }}
            </p>
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-md-6 col-sm-12">
          <label class="form-label">{{ "description" | translate }}</label>
          <input
            type="text"
            formControlName="description"
            class="form-control form-control-rounded"
            placeholder="{{ 'description' | translate }}"
          />
          <div
            *ngIf="
              !form.get('description').valid &&
              (form.get('description').dirty || form.get('description').touched)
            "
            class="text text-danger"
          >
            <p *ngIf="form.get('description').hasError('required')">
              {{ "required" | translate }}
            </p>
            <p *ngIf="form.get('description').hasError('pattern')">
              {{ "only_en" | translate }}
            </p>
          </div>
        </div>
        <div class="col-md-6 col-sm-12">
          <label class="form-label">{{ "description" | translate }} ع</label>
          <input
            type="text"
            formControlName="descriptionAr"
            class="form-control form-control-rounded"
            placeholder="{{ 'description' | translate }} ع"
          />
          <div
            *ngIf="
              !form.get('descriptionAr').valid &&
              (form.get('descriptionAr').dirty ||
                form.get('descriptionAr').touched)
            "
            class="text text-danger"
          >
            <p *ngIf="form.get('descriptionAr').hasError('required')">
              {{ "required" | translate }}
            </p>
            <p *ngIf="form.get('descriptionAr').hasError('pattern')">
              {{ "only_ar" | translate }}
            </p>
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-md-6 col-sm-12">
          <label class="form-label">{{ "address" | translate }}</label>
          <input
            type="text"
            formControlName="address"
            class="form-control form-control-rounded"
            placeholder="{{ 'address' | translate }}"
          />
          <div
            *ngIf="
              !form.get('address').valid &&
              (form.get('address').dirty || form.get('address').touched)
            "
            class="text text-danger"
          >
            <p *ngIf="form.get('address').hasError('required')">
              {{ "required" | translate }}
            </p>
            <p *ngIf="form.get('address').hasError('pattern')">
              {{ "only_en" | translate }}
            </p>
          </div>
        </div>
        <div class="col-md-6 col-sm-12">
          <div class="card border">
            <div class="card-body" formArrayName="phoneNumbers">
              <div class="d-flex justify-content-between">
                <div class="p-2">
                  <h5>
                    {{ "phoneNumber" | translate }}
                  </h5>
                </div>
                <div class="p-2">
                  <button
                    (click)="addForm('phoneNumbers', this.initPhoneItem())"
                    type="button"
                    class="btn btn-rounded btn-info px-4 mx-4 text-white d-inline-block"
                  >
                    <i class="fas fa-plus"></i>
                    {{ "add" | translate }}
                  </button>
                </div>
              </div>

              <div
                class="card bg-light my-2"
                *ngFor="
                  let item of form.get('phoneNumbers')['controls'];
                  let i = index
                "
              >
                <div class="card-body py-1">
                  <div class="d-flex justify-content-around">
                    <div class="p-2 text-white" [formGroupName]="i">
                      <input
                        type="number"
                        formControlName="phone"
                        class="form-control form-control-rounded"
                        placeholder="{{ 'phone' | translate }}"
                      />
                      <div
                        *ngIf="
                          !form.get('phoneNumbers').controls[i].get('phone')
                            .valid &&
                          (form.get('phoneNumbers').controls[i].get('phone')
                            .dirty ||
                            form.get('phoneNumbers').controls[i].get('phone')
                              .touched)
                        "
                        class="text text-danger"
                      >
                        <p
                          class="text-center mb-0 mt-1"
                          *ngIf="
                            form
                              .get('phoneNumbers')
                              .controls[i].get('phone')
                              .hasError('required')
                          "
                        >
                          {{ "required" | translate }}
                        </p>
                      </div>
                    </div>

                    <div class="p-1">
                      <span
                        title="{{ 'Delete' | translate }}"
                        class="badge badge-pill badge-danger p-2 mr-1"
                        (click)="deleteForm('phoneNumbers', i)"
                      >
                        <i
                          title="{{ 'Delete' | translate }}"
                          class="text-20 font-weight-bold i-Delete-File"
                        ></i>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-md-6 col-sm-12">
          <label class="form-label">{{ "featuredImage" | translate }} </label>
          <app-file-input
            [control]="form.controls.featuredImage"
            [currentImage]="form.controls.featuredImage.value"
          >
          </app-file-input>
          <div
            *ngIf="
              !form.get('featuredImage').valid &&
              (form.get('featuredImage').dirty ||
                form.get('featuredImage').touched)
            "
            class="text text-danger"
          >
            <p *ngIf="form.get('featuredImage').hasError('required')">
              {{ "required" | translate }}
            </p>
          </div>
        </div>

        <div class="col-md-6 col-sm-12">
          <label class="form-label">{{ "images" | translate }} </label>
          <app-file-input
            [controlArray]="form.controls.images"
            [multiple]="true"
          >
          </app-file-input>
          <div
            *ngIf="
              !form.get('images').valid &&
              (form.get('images').dirty ||
                form.get('images').touched)
            "
            class="text text-danger"
          >
            <p *ngIf="form.get('images').hasError('required')">
              {{ "required" | translate }}
            </p>
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <p class="lead mx-2">
          {{ "Locate_loacation" | translate }}
        </p>
        <div class="col-md-12 mx-auto border py-2 shadow" style="height: 50vh">
          <app-google-map
            (marker)="setLocation($event)"
            [markerPositions]="locationList"
          ></app-google-map>
          <div
            *ngIf="
              !form.get('lat').valid &&
              (form.get('lat').dirty || form.get('lat').touched)
            "
            class="text text-danger"
          >
            <p *ngIf="form.get('lat').hasError('required')">
              {{ "_.location" | translate }}
            </p>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-center my-5">
        <div class="p-2" *ngIf="mode != 'View'">
          <button
            type="submit"
            class="btn btn-info btn-block btn-hover-scale px-5"
          >
            {{ "save" | translate }}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
